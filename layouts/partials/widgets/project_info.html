<div class="widget widget-latest-post">
	{{ $exclude:=.Scratch.Get "exclude" }}
    {{ $current_members:=slice }}
    {{ range where (where .Site.Pages "Type" "member") ".Params.status" "==" "current" }}
		{{ $current_members = $current_members | append .Title }}
    {{ end }}

	<div class="media">
    	<h4 class="widget-title">Research Theme</h4>
    	{{ range .Params.research_categories }}
    		{{ $research_theme:= . }}
    		{{ range where $.Site.Pages "Type" "research" }}
    			{{ if eq $research_theme .Params.category }} 
    				<a href="{{ .URL | relURL }}/"><strong>{{ $research_theme }}</strong></a>
	    		{{ end }}	
    		{{ end }}
    	{{ end }}	
	</div>
	<div class="media">
    	<h4 class="widget-title">Project Details</h4>
        <ul>
            {{ range $i,$element:=.Params.details }}
            {{ if eq $element.label "Members" }}
            <li><span>{{ $element.label }} :</span>                	
            	{{ range $index,$member:=$element.info }}
            		{{ $authorlink:=path.Join "team/" ( $member | urlize) }}
            		{{ if and ($.Site.GetPage $authorlink) ( in $current_members $member ) }}
                	    <a href="{{ $authorlink | relURL }}"><strong>{{ if (ne $index 0) }}{{ ", " }}{{end}}{{ $member }}</strong></a>
                	{{ else }}    
                	    <a>{{ if (ne $index 0) }}{{ ", " }}{{end}}{{ $member }}</a>
                	{{ end }}
                {{ end }}
            </li>
            {{ else }}
            	{{ if .info }} 
               		<li><span>{{ .label }} :</span> <strong>{{ .info | markdownify }}</strong></li>
            	{{ end }}
            {{ end }}
            {{ end }}
        </ul>
	</div>
</div>